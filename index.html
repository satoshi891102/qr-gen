<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Code Generator</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--surface:#141420;--surface2:#1c1c2e;--border:#2a2a3e;--text:#e8e8f0;--text2:#9898b0;--accent:#7c5cfc;--accent2:#9d7fff;--danger:#ff4466}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:20px}
.container{max-width:800px;margin:0 auto}
h1{text-align:center;font-size:1.8rem;margin-bottom:8px;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.subtitle{text-align:center;color:var(--text2);margin-bottom:32px;font-size:.9rem}
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:20px}
.tabs{display:flex;gap:8px;margin-bottom:20px}
.tab{flex:1;padding:10px;text-align:center;background:var(--surface2);border:1px solid var(--border);border-radius:10px;color:var(--text2);cursor:pointer;font-size:.9rem;transition:.2s}
.tab.active{background:var(--accent);color:#fff;border-color:var(--accent)}
label{display:block;color:var(--text2);font-size:.85rem;margin-bottom:6px;margin-top:14px}
label:first-child{margin-top:0}
input[type=text],textarea{width:100%;padding:12px;background:var(--surface2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:.95rem;outline:none;transition:.2s;font-family:inherit}
input:focus,textarea:focus{border-color:var(--accent)}
textarea{resize:vertical;min-height:100px}
.row{display:flex;gap:12px;flex-wrap:wrap}
.row>*{flex:1;min-width:120px}
.color-wrap{display:flex;align-items:center;gap:10px}
.color-wrap input[type=color]{width:44px;height:44px;border:none;border-radius:10px;cursor:pointer;background:none;padding:0}
.color-wrap span{color:var(--text2);font-size:.85rem}
select{width:100%;padding:12px;background:var(--surface2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:.95rem;outline:none;cursor:pointer;appearance:none;-webkit-appearance:none}
.btn{padding:12px 24px;border:none;border-radius:10px;font-size:.95rem;cursor:pointer;transition:.2s;font-weight:600}
.btn-primary{background:var(--accent);color:#fff;width:100%;margin-top:20px}
.btn-primary:hover{background:var(--accent2)}
.btn-sm{padding:8px 16px;font-size:.85rem;background:var(--surface2);color:var(--text);border:1px solid var(--border)}
.btn-sm:hover{border-color:var(--accent);color:var(--accent)}
.actions{display:flex;gap:8px;justify-content:center;margin-top:16px;flex-wrap:wrap}
#output{display:flex;flex-direction:column;align-items:center;gap:16px;padding:20px 0}
#output:empty{display:none}
.qr-item{background:var(--surface2);border-radius:12px;padding:20px;text-align:center;width:100%}
.qr-item canvas{border-radius:8px}
.qr-label{color:var(--text2);font-size:.8rem;margin-top:8px;word-break:break-all;max-width:400px;margin-inline:auto}
.batch-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}
.batch-grid .qr-item{padding:12px}
footer{text-align:center;color:var(--text2);font-size:.75rem;margin-top:32px;padding-bottom:20px}
@media(max-width:500px){body{padding:12px}.card{padding:16px}h1{font-size:1.4rem}}
</style>
</head>
<body>
<div class="container">
<h1>QR Code Generator</h1>
<p class="subtitle">Generate, customize, and download QR codes instantly</p>

<div class="card">
<div class="tabs">
<div class="tab active" onclick="switchTab('single')">Single</div>
<div class="tab" onclick="switchTab('batch')">Batch Mode</div>
</div>

<div id="single-mode">
<label>Text or URL</label>
<input type="text" id="input-text" placeholder="Enter text or URL..." oninput="generate()">
</div>
<div id="batch-mode" style="display:none">
<label>One URL per line</label>
<textarea id="batch-text" placeholder="https://example.com&#10;https://another.com&#10;https://third.com"></textarea>
</div>

<div class="row">
<div>
<label>Size</label>
<select id="size" onchange="saveSettings();generate()">
<option value="128">Small (128px)</option>
<option value="256" selected>Medium (256px)</option>
<option value="512">Large (512px)</option>
</select>
</div>
<div>
<label>Foreground</label>
<div class="color-wrap">
<input type="color" id="fg" value="#7c5cfc" onchange="saveSettings();generate()">
<span id="fg-hex">#7c5cfc</span>
</div>
</div>
<div>
<label>Background</label>
<div class="color-wrap">
<input type="color" id="bg-color" value="#0a0a0f" onchange="saveSettings();generate()">
<span id="bg-hex">#0a0a0f</span>
</div>
</div>
</div>

<button class="btn btn-primary" onclick="generate()">Generate QR Code</button>
</div>

<div id="output"></div>
</div>

<footer>Built by Forge for Basirah</footer>

<script>
let mode='single';
function switchTab(m){
  mode=m;
  document.querySelectorAll('.tab').forEach((t,i)=>t.classList.toggle('active',(m==='single'?i===0:i===1)));
  document.getElementById('single-mode').style.display=m==='single'?'':'none';
  document.getElementById('batch-mode').style.display=m==='batch'?'':'none';
  document.getElementById('output').innerHTML='';
}

function getSettings(){
  return{size:+document.getElementById('size').value,fg:document.getElementById('fg').value,bg:document.getElementById('bg-color').value}
}

function saveSettings(){
  const s=getSettings();
  localStorage.setItem('qr-settings',JSON.stringify(s));
  document.getElementById('fg-hex').textContent=s.fg;
  document.getElementById('bg-hex').textContent=s.bg;
}

function loadSettings(){
  try{
    const s=JSON.parse(localStorage.getItem('qr-settings'));
    if(s){
      document.getElementById('size').value=s.size||256;
      document.getElementById('fg').value=s.fg||'#7c5cfc';
      document.getElementById('bg-color').value=s.bg||'#0a0a0f';
      document.getElementById('fg-hex').textContent=s.fg||'#7c5cfc';
      document.getElementById('bg-hex').textContent=s.bg||'#0a0a0f';
    }
  }catch(e){}
}

function makeQR(text,container,size,fg,bg){
  return new QRCode(container,{text,width:size,height:size,colorDark:fg,colorLight:bg,correctLevel:QRCode.CorrectLevel.H});
}

function generate(){
  saveSettings();
  const out=document.getElementById('output');
  out.innerHTML='';
  const{size,fg,bg}=getSettings();

  let items=[];
  if(mode==='single'){
    const t=document.getElementById('input-text').value.trim();
    if(!t)return;
    items=[t];
  }else{
    items=document.getElementById('batch-text').value.split('\n').map(s=>s.trim()).filter(Boolean);
    if(!items.length)return;
  }

  const isBatch=items.length>1;
  const wrapper=document.createElement('div');
  if(isBatch)wrapper.className='batch-grid';

  items.forEach(text=>{
    const item=document.createElement('div');
    item.className='qr-item';
    const qrDiv=document.createElement('div');
    item.appendChild(qrDiv);
    makeQR(text,qrDiv,isBatch?Math.min(size,200):size,fg,bg);

    if(items.length>1){
      const lbl=document.createElement('div');
      lbl.className='qr-label';
      lbl.textContent=text.length>50?text.slice(0,50)+'...':text;
      item.appendChild(lbl);
    }

    const actions=document.createElement('div');
    actions.className='actions';

    const dlBtn=document.createElement('button');
    dlBtn.className='btn btn-sm';
    dlBtn.textContent='Download PNG';
    dlBtn.onclick=()=>{
      const c=qrDiv.querySelector('canvas');
      if(!c)return;
      const a=document.createElement('a');
      a.download='qr-'+(text.replace(/[^a-z0-9]/gi,'_').slice(0,30))+'.png';
      a.href=c.toDataURL('image/png');
      a.click();
    };

    const cpBtn=document.createElement('button');
    cpBtn.className='btn btn-sm';
    cpBtn.textContent='Copy';
    cpBtn.onclick=async()=>{
      const c=qrDiv.querySelector('canvas');
      if(!c)return;
      try{
        const blob=await new Promise(r=>c.toBlob(r,'image/png'));
        await navigator.clipboard.write([new ClipboardItem({'image/png':blob})]);
        cpBtn.textContent='Copied!';
        setTimeout(()=>cpBtn.textContent='Copy',1500);
      }catch(e){cpBtn.textContent='Failed';setTimeout(()=>cpBtn.textContent='Copy',1500)}
    };

    actions.appendChild(dlBtn);
    actions.appendChild(cpBtn);
    item.appendChild(actions);
    wrapper.appendChild(item);
  });

  if(isBatch){
    const dlAll=document.createElement('button');
    dlAll.className='btn btn-primary';
    dlAll.textContent='Download All PNGs';
    dlAll.style.marginTop='0';
    dlAll.style.marginBottom='16px';
    dlAll.onclick=()=>wrapper.querySelectorAll('.qr-item').forEach(item=>{
      const btn=item.querySelector('.btn-sm');
      if(btn)btn.click();
    });
    out.appendChild(dlAll);
  }
  out.appendChild(wrapper);
}

loadSettings();
document.getElementById('fg-hex').textContent=document.getElementById('fg').value;
document.getElementById('bg-hex').textContent=document.getElementById('bg-color').value;

// Live generate on input
let debounce;
document.getElementById('input-text').addEventListener('input',()=>{clearTimeout(debounce);debounce=setTimeout(generate,300)});
</script>
</body>
</html>
